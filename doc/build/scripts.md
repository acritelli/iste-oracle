# Scripts and Files

## Overview

There are several scripts and files that are prestaged on the AMI. This documentation explains the function and placement of these scripts.

## Oracle Home Directory

Several files and scripts are prestaged in the `oracle` user's home directory (`/home/oracle`). These include:

* `.bashrc`: The .bashrc file is the same as the standard `.bashrc`file, except it checks for the existence of the `.email` file (see below). IF this file exists, then it is excuted. If it does not exist, then the `/home/oracle/bin/configInstance` script is run to configure the instance for the first time. The `.bashrc` also aliases `sqlplus` to use the `rlwrap` package, which provides command history to sqlplus.
* `.bash_profile`: The `oracle` user's BASH profile sets up important variables, such as the PATH, ORACLE_HOME, and ORACLE_BASE directories.
* `.email`: The `.email` file **is not** prestaged on the instance. It is created when the `oracle` user logs into the instance for the first time. This file simply exports variables that are needed by other scripts, such as the user's RIT email and RIT username. The RIT username is used by the database backup and restore scripts to name the user's AWS bucket accordingly.

### Home directory scripts

The `/home/oracle/bin` directory contains several scripts that are used in the labs. These include:

* `configInstance`: This script is called when there is no `.email` file in the user's home directory. It collects the user's email and creates the `.email` file with the user's RIT email and login username.
* `dbbackup`: Creates a backup of the user's database and stores it in the user's S3 bucket.
* `dbrestore`: Restores a copy of the backup file from S3.
* `dbrestoreKnownGood`: Restores a "known good" copy of the database that represents the proper state of the database after the completion of Lab 2. This is done by extracing the `/u03/labfiles/jobs_known_good.tar.gz` file.

## Labfiles in /u03

Several scripts are stored in the `/u03/labfiles` directory for use when completing labs. These include:

* `jobs_known_good.tar.gz`: A "known good" copy of the database that can be restored by calling the `dbrestoreKnownGood` command.
* `lab1/`: Contains scripts for lab 1 (see below). This directory also contains the pfile for starting the Oracle database.
* `lab2/`: Contains scripts for lab 2 (see below).

### lab1

The following scripts are in the `/u03/labfiles/lab1/` directory:

* `scripts/`: Contains the database initialization scripts that are generated by the Oracle DBCA. These are a set of instructor-provided scripts for bootstrapping the database.
* `createEndUser.sql` and `createTables.sql`: Scripts used as part of the lab exercises for lab 1.
* `initJOBS.ora`: The pfile for starting the Oracle JOBS database. This is a copy of `scripts/init.ora`

### lab2

The following scripts are in the `/u03/labfiles/lab2/` directory:

* `insertSTATE.sql`, `Interview_Table_Data.txt`, and `LoadEMPLOYER.ctl`: These files are all used as part of the lab exercises in lab 2.
